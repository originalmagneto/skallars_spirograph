# Roadmap: Admin Panel (Content-First) + AI Adjustments

This roadmap is based on the current codebase, the UI vs functionality audit, and your stated priorities.

**Status (Feb 3, 2026)**
- Phase 0 complete.
- Phase 1 (text-first editing) complete.
- Phase 1 media tools moved to Phase 2 (you said no image fields right now).
- Runtime stabilization pass (Feb 6, 2026) in progress: admin permission gating simplification + LinkedIn graceful fallbacks.

**Status (Feb 6, 2026 - current pass)**
- LinkedIn resilience + fallback cleanup in progress.
- Article Editor LinkedIn UI simplification in progress (Basic vs Power).
- Residual runtime noise cleanup in progress (`settings` fetch noise + non-blocking LinkedIn API handling).

## Step 5 (Current): Reliability + UX Cleanup
- Remove residual `settings`-fetch runtime noise by consolidating reads through tolerant map fetches and avoiding strict single-row expectations. ğŸ”„
- Make LinkedIn status the single source of truth for default organization URN in UI (remove duplicate client-side settings fetches). ğŸ”„
- Harden LinkedIn API routes to handle mixed scope formats and always return non-blocking fallback payloads for organizations/analytics. ğŸ”„
- Simplify Article Editor LinkedIn panel with **Basic vs Power** mode:
  - Basic: connect, target, org, message, share.
  - Power: share type, image post controls, scheduling, logs, diagnostics. ğŸ”„
- Validate full production build after cleanup and close remaining regressions before next feature work. â³

## Step 1 (Now): Stability Hardening (LinkedIn + Admin Access)
- Make LinkedIn endpoints **degrade gracefully** (no hard-fail UI when org scopes/org APIs are unavailable). âœ…
- Make admin role checks **server-first** to reduce `Profile role check timed out` false negatives. âœ…
- Ensure LinkedIn Settings and Article Editor can proceed with a **saved default org URN** fallback. âœ…
- Reduce noisy UX errors from expected non-critical states (missing analytics scope, no org list yet, disconnected account). âœ…

### Step 1 Acceptance Criteria
- `/api/linkedin/organizations` returns a usable response with fallback organizations when possible.
- LinkedIn Settings does not block on analytics/org fetch failures and keeps the page usable.
- Article Editor can share to company when a valid default org URN exists, even if org list fetch fails.
- Admin access checks no longer depend primarily on slow client-side profile queries.
- Repeated `Profile role check timed out` errors are significantly reduced in normal usage.

## Step 2 (Now): UX Simplification Pass (Article + Publishing)
- Move non-essential AI controls behind a single **Advanced Controls** panel in Article Studio. âœ…
- Keep default article flow focused on 5 actions: topic, links, type, depth, generate. âœ…
- Default cover generation to **Lite mode** so first-time users are not forced into provider/model choices. âœ…
- Move LinkedIn scheduling/log diagnostics into **Advanced LinkedIn Tools** while keeping Share as the primary action. âœ…
- Reduce noisy permission flow by removing automatic admin diagnostics and preventing overlapping access checks. âœ…

## Step 3 (Now): Runtime Noise + Fallback Hardening
- Remove duplicated admin role resolution logic in `admin/layout` and use `AuthContext` as source of truth. âœ…
- Make LinkedIn organizations + analytics endpoints return non-blocking fallback payloads for transient auth/session gaps. âœ…
- Reduce repeated per-key settings reads for AI services by switching to short-lived settings map cache. âœ…
- Keep company-share UX usable when org list is unavailable by preserving default org fallback paths. âœ…

## Step 4 (Now): Progressive Disclosure UX + Auth Noise Reduction
- Add **Basic vs Power mode** in Article Generator so non-technical users only see core controls by default. âœ…
- Add **Basic vs Power mode** in LinkedIn Settings so diagnostics/scheduling are hidden until needed. âœ…
- Remove noisy client-side admin role fallbacks and rely on **server-first role check** + cache. âœ…
- Keep advanced controls fully available for power users without removing any capability. âœ…

### Step 4 Acceptance Criteria
- In Article Studio, first-time users can generate with a minimal form and no prompt/model overload.
- In LinkedIn Settings, primary connect/default-org flow is visible without logs/analytics clutter.
- Repeated `Profile role check timed out` console errors are no longer emitted from client-side profile RPC/query fallback paths.

### Step 2 Acceptance Criteria
- Average users can generate an article without opening advanced sections.
- Power users can still access model/thinking/tone/prompt controls in one place.
- LinkedIn section presents share-first flow; scheduling and logs remain available but secondary.
- Admin page no longer auto-runs diagnostics during normal access checks.

## Phase 0: Fix UI vs Functionality Mismatches (Immediate)
- Wire **admin content edits to the actual frontend** (replace or augment `translations.ts` with Supabase content for public pages). âœ…
- Fix **Article Editor copy** (â€œMarkdownâ€ vs HTML) or implement a true rich editor that matches output. âœ…
- Persist **Map Display Settings** (store in Supabase or localStorage) so â€œsaved automaticallyâ€ is true. âœ…
- Preserve **Team Member photo positioning** when editing. âœ…
- Implement **image batch generation** honoring `image_count` or remove the setting. âœ…
- Update **AI Usage cost estimates** to reflect selected model or remove the estimate if unknown. âœ…
- Fix **Blog Rendering** by installing `@tailwindcss/typography` plugin. âœ…

## Phase 1: Content System Foundation (Text-First, Core Admin UX)
- Create a **content model registry** to define editable sections, fields, and field types. âœ…
- Connect this registry to **public pages** and migrate existing `translations.ts` strings into Supabase content. âœ…
- Provide **preview modes** for each section and a full-page preview in admin. âœ…
- Add **draft vs published** state with per-item and per-section publish actions. âœ…
- Add **role-aware editing**: editors can propose changes, admins publish. âœ…
- Extend **Team Members** with bio + icon fields for richer text-only profiles. âœ…
- Add **admin preview bar** with section highlights and deep links into Content Manager. âœ…

## Phase 2: Full-Fidelity Page Editing
- Implement a **page/section editor** (block-based) to edit homepage and key pages without code.
- Add **layout control** for homepage section order + visibility (Phase 2 kickoff). âœ…
- Add **Services block list** (reorder + enable/disable + multilingual titles/descriptions). âœ…
- Add **News block settings** (limit, autoplay speed, show/hide View All). âœ…
- Add **Clients block settings** (visible logos + autoplay speed). âœ…
- Add **Team block settings** (columns + show/hide icons, bios, LinkedIn). âœ…
- Add **Footer block settings** (show/hide contact, solutions, newsletter, social). âœ…
- Add **Countries block settings** (controls, labels, stats, default view). âœ…
- Add **Footer links manager** (solutions + social URLs, multilingual labels). âœ…
- Add **Homepage blocks** (callout block type + layout integration). âœ…
- Add **Block templates** (testimonials + FAQ with item editor). âœ…
- Add **drag-and-drop ordering** inside Blocks (items list). âœ…
- Make **Services sticky images** editable via content overrides (non-hero). âœ…
- Make **Contact image** editable via content overrides (footer contact block). âœ…
- Support **reorderable blocks** (now available in Blocks manager). âœ…
- Support **section templates** (Hero, Services, Team, Testimonials, Contact). âœ…
- Add **multilingual editing UX** with side-by-side view and translation helpers.
- Add **live preview** with â€œbefore/afterâ€ diff for reviewers. âœ…
- Add **SEO editor** (meta title/desc/keywords) for articles. âœ…
- Add **SEO editor** (OpenGraph, structured data) per page. âœ…

## Phase 2.1: Media + History (Moved from Phase 1)
- Introduce **media library** with tags + search for all images. âœ…
- Add **image upload tools** for `site_content` graphics and section assets (crop later). âœ…
- Add **content history** (versioning + restore) for published `site_content`. âœ…
- Add **crop tools** (square + landscape) for Team/Clients/Content image fields. âœ…
- Allow **Team + Clients** to pick images from the Media Library. âœ…

## Phase 3: AI Article Studio (Targeted Adjustments)
- Add **research mode** controls: Quick vs Deep with clear time/quality tradeoff. âœ…
 - Improve **sources panel**: show citations inline and in a dedicated references block. âœ…
- Add **voice & tone controls** (formal legal memo, client-friendly, news brief). âœ…
- Add **length control** slider with target word count and estimated cost/time. âœ…
- Add **outline-first workflow**: generate outline, approve, then generate full draft. âœ…
- Add **editorial tools**: rewrite sections, expand/shorten, simplify. âœ…
- Add **fact-check checklist** and **legal compliance disclaimer** blocks. âœ…
- Add **AI Image Generator in Article Editor** (Gemini/Turbo, aspect ratios, save to media library, set cover). âœ…
- Align **Gemini/Imagen image endpoints** + allow **custom model overrides**. âœ…
- Fix **JSON output with Google grounding** (prompt + response config + repair). âœ…
- Increase **outline timeouts** for deep research and clarify the outline workflow in UI. âœ…
- Add **Article Model** + **Thinking Budget** controls directly in AI Article Generator (override global AI settings). âœ…
- Keep **Main AI Settings** for translations/shared tasks and label accordingly. âœ…
- Add **Lite vs Advanced** image generation modes in Article Editor. âœ…
- Fix **link-only outputs** when links are provided without grounding (output token budget + validation). âœ…

## Phase 4: AI Image Studio (Only After Content Editing Is Strong)
- Create a dedicated **Image Studio** with prompt builder, styles, and aspect ratio presets. âœ…
- Add **batch generation** with previews, history, and comparisons. âœ…
- Add **in-app editor** (crop, focal point, color adjustments, text overlay). âœ…
- Add **template-based social images** for blog and announcements. âœ…
- Store **generation metadata** (prompt, model, seed) and allow regeneration. âœ…

## Phase 5: Publishing Workflow + Analytics
- Add **approval workflow** (review, approve, publish, schedule). âœ…
- Add **scheduled publishing** and **content calendars**. âœ… (scheduling UI + API gating)
- Add **engagement analytics** for articles and content blocks. âœ… (articles; block tracking placeholder)
- Add **audit logs** for admin actions and AI usage. âœ… (article audit logs)

## Phase 6: Publishing Calendar + Engagement Tracking
- Add **Publishing Calendar** view with scheduled + review queues. âœ…
- Add **engagement event tracking** (CTA clicks, view-all clicks). âœ…
- Add **analytics events table + API** for custom events. âœ…

## Phase 7: Admin IA + Workflow Simplification (Complete)
- Split admin into **two workspaces**: Site Editor vs Publishing & AI. âœ…
- Replace the mega-tab bar with a **left sidebar** grouped by workflow. âœ…
- Ensure **URL deep links** reflect tab/workspace selection. âœ…
- Consolidate article workflows into **Article Studio** (AI Lab â†’ Draft â†’ Media â†’ Publish). âœ…
- Unify AI settings into **one source of truth** with clear override UX. âœ…
- Widen admin layout + reduce cramped workspace controls. âœ…

## Phase 7.1: Admin Design System Unification (In Progress)
- Enforce one canonical admin shell and remove mixed legacy page layouts. âœ…
- Normalize navigation patterns (workspace switch + section nav + consistent panel header). âœ…
- Route legacy `/admin/*` pages to canonical query-based shell to prevent parallel UI systems. âœ…
- Standardize internal manager component headers/actions to shared primitives (`AdminPanelHeader`, `AdminSectionCard`) for core modules (`ArticleStudio`, `AILab`, `ArticleEditor`, `LinkedInSettings`, `ContentManager`, `PageLayoutManager`, `MediaLibraryManager`, `UserManagement`). âœ…
- Next: apply shared primitives to remaining secondary managers (Blocks, Team, Clients, Footer, Services, News) for full design parity. â³
- Next: compact visual noise in advanced controls across AI + LinkedIn panels without losing power-user depth. â³

## Phase 8: Social Distribution (LinkedIn) (In Progress)
- Define **LinkedIn app setup** steps + required permissions (Organization + Member posting). âœ…
- Add **LinkedIn OAuth** per user with secure token storage + refresh.
- Add **LinkedIn post preview** (image + headline + excerpt). âœ…
- Allow **share now / schedule** with per-user accounts. (Share now âœ…, scheduling UI âœ…, cron runner âœ…)
- Track share status + errors in a **share log**. âœ…
- Support **image shares** (LinkedIn asset upload). âœ…

## Enablers and Infrastructure
- Define **Supabase schema migrations** for new content blocks, media metadata, revisions, and AI research logs.
- Add **RLS policies** for admin/editor/user roles.
- Add **rate limits** and **usage quotas** for AI generation.
- Add **per-article budget controls** (token caps and cost estimates).

## Test Plan (AI Reliability)
- Generate article with **Deep** research and grounding; verify JSON fields and sources list.
- Generate article with **Quick** mode + external links; verify full content (not title-only).
- Run **Outline-first** flow with Deep research; ensure outline completes within 10 minutes.
- Switch **Article Model** + **Thinking Budget** in AILab; verify generation uses new model in logs.
- Run **Lite** image mode (Turbo, 1 variant) and **Advanced** mode (custom provider/model).
